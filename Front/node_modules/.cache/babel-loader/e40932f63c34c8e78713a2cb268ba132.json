{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport UserCard from \"@/components/UserCard.vue\";\nimport { ref, onMounted, computed, watch } from \"vue\";\nexport default {\n  name: 'UserView',\n  components: {\n    UserCard\n  },\n  setup() {\n    const users = ref([]);\n    const lastPage = ref(0);\n    const perPage = ref(8);\n    const currentPage = ref(1);\n    const fetchPage = async function (page) {\n      var response = await fetch(\"/api/users/display?perPage=\" + perPage.value + \"&page=\" + page);\n      if (response.ok) {\n        var data = await response.json();\n        users.value = data.records;\n        lastPage.value = data.pages;\n      } else {\n        alert(response.statusText);\n      }\n    };\n    const pages = computed(() => {\n      var pages = [];\n      for (var i = 1; i <= lastPage.value; i++) {\n        pages.push(i);\n      }\n      return pages;\n    });\n    onMounted(function () {\n      fetchPage(1);\n    });\n    watch(currentPage, () => {\n      fetchPage(currentPage.value);\n    });\n    return {\n      users,\n      pages,\n      fetchPage,\n      currentPage\n    };\n  }\n};","map":{"version":3,"mappings":";AA2CA,OAAOA,QAAO,MAAO,2BAA2B;AAChD,SAASC,GAAG,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,KAAI,QAAS,KAAK;AAErD,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVN;EACF,CAAC;EACDO,KAAK,GAAG;IACN,MAAMC,KAAI,GAAIP,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMQ,QAAO,GAAIR,GAAG,CAAC,CAAC,CAAC;IACvB,MAAMS,OAAM,GAAIT,GAAG,CAAC,CAAC,CAAC;IACtB,MAAMU,WAAU,GAAIV,GAAG,CAAC,CAAC,CAAC;IAE1B,MAAMW,SAAQ,GAAI,gBAAgBC,IAAI,EAAE;MAEtC,IAAIC,QAAO,GAAI,MAAMC,KAAK,CAAC,6BAA4B,GAAIL,OAAO,CAACM,KAAI,GAAI,QAAO,GAAIH,IAAI,CAAC;MAE3F,IAAIC,QAAQ,CAACG,EAAE,EAAE;QACf,IAAIC,IAAG,GAAI,MAAMJ,QAAQ,CAACK,IAAI,EAAE;QAChCX,KAAK,CAACQ,KAAI,GAAIE,IAAI,CAACE,OAAO;QAC1BX,QAAQ,CAACO,KAAI,GAAIE,IAAI,CAACG,KAAK;MAC7B,OAAO;QACLC,KAAK,CAACR,QAAQ,CAACS,UAAU,CAAC;MAC5B;IACF,CAAC;IAED,MAAMF,KAAI,GAAIlB,QAAQ,CAAC,MAAM;MAC3B,IAAIkB,KAAI,GAAI,EAAE;MAEd,KAAK,IAAIG,IAAI,CAAC,EAAEA,KAAKf,QAAQ,CAACO,KAAK,EAAEQ,CAAC,EAAE,EAAE;QACxCH,KAAK,CAACI,IAAI,CAACD,CAAC;MACd;MAEA,OAAOH,KAAK;IACd,CAAC;IAEDnB,SAAS,CAAC,YAAY;MACpBU,SAAS,CAAC,CAAC,CAAC;IACd,CAAC,CAAC;IAEFR,KAAK,CAACO,WAAW,EAAE,MAAM;MACvBC,SAAS,CAACD,WAAW,CAACK,KAAK;IAC7B,CAAC,CAAC;IAEF,OAAO;MACLR,KAAK;MACLa,KAAK;MACLT,SAAS;MACTD;IACF,CAAC;EAEH;AACF","names":["UserCard","ref","onMounted","computed","watch","name","components","setup","users","lastPage","perPage","currentPage","fetchPage","page","response","fetch","value","ok","data","json","records","pages","alert","statusText","i","push"],"sourceRoot":"","sources":["/Users/yeelam/Documents/Year3 sem1/COMP3047/Lab/Asm03/Front/src/views/UsersView.vue"],"sourcesContent":["<template>\n  <div>\n    <nav aria-label=\"breadcrumb\">\n      <ol class=\"breadcrumb\">\n        <li class=\"breadcrumb-item\"><a href=\"/\">Home</a></li>\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Users</li>\n        <button type=\"button\" class=\"btn btn-primary position-absolute top-20 end-0\" @click=\"add\">Add</button>\n      </ol>\n    </nav>\n  </div>\n  <div class=\"row row-cols-1 row-cols-md-4 g-4\">\n    <UserCard v-for=\"u in users\" :key=\"u._id\" :id=\"u._id\" :name=\"u.name\" :email=\"u.email\" />\n  </div>\n  <nav aria-label=\"Page navigation example\">\n        <ul class=\"pagination\">\n            <li class=\"page-item\">\n                <a a v-if=\"currentPage > 1\" class=\"page-link\" @click=\"currentPage--\">\n                    <span aria-hidden=\"true\">&laquo;</span>\n                </a>\n            </li>\n            <li class=\"page-item\"><a v-if=\"currentPage > 2\" class=\"page-link\" @click=\"currentPage = currentPage - 2\">{{\n                    currentPage - 2\n            }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage > 1\" class=\"page-link\" @click=\"currentPage--\">{{ currentPage - 1\n            }}</a></li>\n            <li class=\"page-item\"><a class=\"page-link active\">{{ currentPage }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage < pages.length\" class=\"page-link\" @click=\"currentPage++\">{{\n                    currentPage + 1\n            }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage < pages.length - 1\" class=\"page-link\"\n                    @click=\"currentPage = currentPage + 2\">{{ currentPage + 2 }}</a></li>\n            <li class=\"page-item\">\n                <a v-if=\"currentPage < pages.length\" class=\"page-link\" @click=\"currentPage++\">\n                    <span aria-hidden=\"true\">&raquo;</span>\n                </a>\n            </li>\n        </ul>\n    </nav>\n</template>\n\n\n<script>\n\nimport UserCard from \"@/components/UserCard.vue\";\nimport { ref, onMounted, computed, watch } from \"vue\";\n\nexport default {\n  name: 'UserView',\n  components: {\n    UserCard\n  },\n  setup() {\n    const users = ref([]);\n    const lastPage = ref(0);\n    const perPage = ref(8);\n    const currentPage = ref(1);\n\n    const fetchPage = async function (page) {\n\n      var response = await fetch(\"/api/users/display?perPage=\" + perPage.value + \"&page=\" + page);\n\n      if (response.ok) {\n        var data = await response.json();\n        users.value = data.records;\n        lastPage.value = data.pages;\n      } else {\n        alert(response.statusText);\n      }\n    };\n\n    const pages = computed(() => {\n      var pages = [];\n\n      for (var i = 1; i <= lastPage.value; i++) {\n        pages.push(i)\n      }\n\n      return pages;\n    })\n\n    onMounted(function () {\n      fetchPage(1);\n    });\n\n    watch(currentPage, () => {\n      fetchPage(currentPage.value)\n    });\n\n    return {\n      users,\n      pages,\n      fetchPage,\n      currentPage,\n    };\n\n  }\n}\n\n</script>\n\n\n    "]},"metadata":{},"sourceType":"module"}
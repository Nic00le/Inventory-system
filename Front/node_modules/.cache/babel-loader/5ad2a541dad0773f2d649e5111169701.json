{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"col\"\n};\nconst _hoisted_2 = {\n  class: \"card\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n  class: \"card-body\"\n};\nconst _hoisted_5 = [\"href\"];\nconst _hoisted_6 = {\n  class: \"card-title\"\n};\nconst _hoisted_7 = {\n  key: 0\n};\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" <RouterLink :to=\\\"path\\\"> \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"img\", {\n    src: $props.src,\n    class: \"card-img-top\",\n    alt: \"Photo is gone\"\n  }, null, 8 /* PROPS */, _hoisted_3), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"a\", {\n    href: $setup.path\n  }, [_createElementVNode(\"h5\", _hoisted_6, _toDisplayString($props.title), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($props.descriptions), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_5), $props.type == 'books' || $props.type == 'games' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [$props.borrowerId && $props.borrowerId != $setup.userId ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, \"Borrowed by \" + _toDisplayString($props.borrowerName), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), !$props.borrowerId ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    type: \"button\",\n    class: \"btn btn-primary\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.borrow && $setup.borrow(...args))\n  }, \"Borrow\")) : _createCommentVNode(\"v-if\", true), $props.borrowerId == $setup.userId ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 2,\n    type: \"button\",\n    class: \"btn btn-outline-primary\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.returnItem && $setup.returnItem(...args))\n  }, \"Return\")) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), $props.type == 'gifts' || $props.type == 'materials' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"p\", null, \"Availability: \" + _toDisplayString($props.quantity), 1 /* TEXT */), $props.comsumes - $props.quantity > 0 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    type: \"button\",\n    class: \"btn btn-primary\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.comsume && $setup.comsume(...args))\n  }, \"Comsume\")) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" </RouterLink> \")]);\n}","map":{"version":3,"mappings":";;EACOA,KAAK,EAAC;AAAK;;EAETA,KAAK,EAAC;AAAM;;;EAEVA,KAAK,EAAC;AAAW;;;EAEdA,KAAK,EAAC;AAAY;;;;;;;;;;;uBAN9BC,oBAsBM,OAtBNC,UAsBM,GArBJC,kDAAgC,EAChCC,oBAkBM,OAlBNC,UAkBM,GAjBJD,oBAAyD;IAAnDE,GAAG,EAAEC,UAAG;IAAEP,KAAK,EAAC,cAAc;IAACQ,GAAG,EAAC;uCACzCJ,oBAeM,OAfNK,UAeM,GAdJL,oBAGI;IAHAM,IAAI,EAAEC;EAAI,IACZP,oBAAuC,MAAvCQ,UAAuC,mBAAbL,YAAK,kBAC/BH,oBAAyB,4BAAnBG,mBAAY,+CAETA,WAAI,eAAeA,WAAI,6BAAlCN,oBAKM,oBAJKM,iBAAU,IAAIA,iBAAU,IAAEI,aAAM,kBAAzCV,oBAA6E,iBAAlC,cAAY,oBAAGM,mBAAY,wDACvDA,iBAAU,kBAAzBN,oBAAgG;;IAArEY,IAAI,EAAC,QAAQ;IAACb,KAAK,EAAC,iBAAiB;IAAEc,OAAK,yCAAEH,uCAAM;KAAE,QAAM,wCACzEJ,iBAAU,IAAII,aAAM,kBAAlCV,oBACqC;;IADDY,IAAI,EAAC,QAAQ;IAACb,KAAK,EAAC,yBAAyB;IAC9Ec,OAAK,yCAAEH,+CAAU;KAAE,QAAM,+EAEnBJ,WAAI,eAAeA,WAAI,iCAAlCN,oBAGM,oBAFJG,oBAAmC,WAAhC,gBAAc,oBAAGG,eAAQ,kBACbA,eAAQ,GAACA,eAAQ,sBAAhCN,oBAA4G;;IAAvEY,IAAI,EAAC,QAAQ;IAACb,KAAK,EAAC,iBAAiB;IAAEc,OAAK,yCAAEH,yCAAO;KAAE,SAAO,mFAIzGR,sCAAsB","names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","src","$props","alt","_hoisted_4","href","$setup","_hoisted_6","type","onClick"],"sourceRoot":"","sources":["/Users/yeelam/Documents/Year3 sem1/COMP3047/Lab/Asm03/Front/src/components/TheCards.vue"],"sourcesContent":["<template>\n  <div class=\"col\">\n    <!-- <RouterLink :to=\"path\"> -->\n    <div class=\"card\">\n      <img :src=\"src\" class=\"card-img-top\" alt=\"Photo is gone\">\n      <div class=\"card-body\">\n        <a :href=\"path\">\n          <h5 class=\"card-title\">{{ title }}</h5>\n          <p>{{ descriptions }}</p>\n        </a>\n        <div v-if=\"type == 'books' || type == 'games'\">\n          <p v-if=\"borrowerId && borrowerId!=userId\">Borrowed by {{ borrowerName }}</p>\n          <button v-if=\"!borrowerId\" type=\"button\" class=\"btn btn-primary\" @click=\"borrow\">Borrow</button>\n          <button v-if=\"borrowerId == userId\" type=\"button\" class=\"btn btn-outline-primary\"\n            @click=\"returnItem\">Return</button>\n        </div>\n        <div v-if=\"type == 'gifts' || type == 'materials'\">\n          <p>Availability: {{ quantity }}</p>\n          <button v-if=\"(comsumes-quantity)>0\" type=\"button\" class=\"btn btn-primary\" @click=\"comsume\">Comsume</button>\n        </div>\n      </div>\n    </div>\n    <!-- </RouterLink> -->\n  </div>\n</template>\n\n<style>\na {\n  color: #202223;\n  text-decoration: none;\n}\n</style>\n\n<script>\nimport { ref } from \"vue\";\n\nexport default {\n  name: \"TheCards\",\n  props: {\n    id: String,\n    type: String,\n    src: String,\n    title: String,\n    descriptions: String,\n    comsumes: Int32Array,\n    quantity: Int32Array,\n    borrowerId: String,\n    borrowerName: String\n  },\n  setup(props) {\n    const path = \"/\" + props.type + \"/detail/\" + props.id;\n    const userId = localStorage.getItem(\"userId\");\n\n    const borrow = async function () {\n      let token = ref(localStorage.getItem('token'));\n      let path = \"/api/user/borrow/\" + props.id;\n\n      var response = await fetch(path, {\n        method: \"post\",\n        headers: {\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          \"x-access-token\": token.value\n        }\n      });\n      if (response.ok) {\n        alert(\"Borrow success.\")\n        location.reload();\n      } else {\n        alert(response.statusText);\n      }\n\n    }\n\n    const comsume = async function () {\n      let token = ref(localStorage.getItem('token'));\n      let path = \"/api/user/comsume/\" + props.id;\n\n      var response = await fetch(path, {\n        method: \"post\",\n        headers: {\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          \"x-access-token\": token.value\n        }\n      });\n      if (response.ok) {\n        alert(\"Success.\")\n        location.reload();\n      } else {\n        alert(response.statusText);\n      }\n\n    }\n\n    const returnItem = async function () {\n      let token = ref(localStorage.getItem('token'));\n      let path = \"/api/user/return/\" + props.id;\n\n      var response = await fetch(path, {\n        method: \"post\",\n        headers: {\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          \"x-access-token\": token.value\n        }\n      });\n      if (response.ok) {\n        alert(\"Returned\")\n        location.reload();\n      } else {\n        alert(response.statusText);\n      }\n\n    }\n\n    return {\n      path,\n      borrow,\n      comsume,\n      returnItem,\n      userId\n    }\n  }\n}\n</script>"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useRoute } from 'vue-router';\nimport { ref, watch, onMounted, computed } from 'vue';\nimport TheCards from '@/components/TheCards.vue';\nexport default {\n  name: 'SearchView',\n  components: {\n    TheCards\n  },\n  setup() {\n    const records = ref([]);\n    const route = useRoute();\n    const lastPage = ref(0);\n    const currentPage = ref(1);\n    const input = route.params.input;\n    const perPage = ref(6);\n    const pages = computed(() => {\n      var pages = [];\n      for (var i = 1; i <= lastPage.value; i++) {\n        pages.push(i);\n      }\n      return pages;\n    });\n    const fetchPage = async function (page) {\n      var response = await fetch(\"/api/search/\" + input + \"?perPage=\" + perPage.value + \"&page=\" + page);\n      if (response.ok) {\n        var data = await response.json();\n        records.value = data.records;\n        lastPage.value = data.pages;\n      } else {\n        alert(response.statusText);\n      }\n      console.log(records);\n    };\n    watch(currentPage, () => {\n      fetchPage(currentPage.value);\n    });\n    onMounted(function () {\n      fetchPage(1);\n    });\n    return {\n      records,\n      fetchPage,\n      currentPage,\n      pages\n    };\n  }\n};","map":{"version":3,"mappings":";AAuCA,SAASA,QAAO,QAAS,YAAY;AACrC,SAASC,GAAG,EAAEC,KAAK,EAAEC,SAAS,EAAEC,QAAO,QAAS,KAAK;AACrD,OAAOC,QAAO,MAAO,2BAA2B;AAEhD,eAAe;EACXC,IAAI,EAAE,YAAY;EAClBC,UAAU,EAAE;IACRF;EACJ,CAAC;EACDG,KAAK,GAAG;IACJ,MAAMC,OAAM,GAAIR,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMS,KAAI,GAAIV,QAAQ,EAAE;IACxB,MAAMW,QAAO,GAAIV,GAAG,CAAC,CAAC,CAAC;IACvB,MAAMW,WAAU,GAAIX,GAAG,CAAC,CAAC,CAAC;IAC1B,MAAMY,KAAI,GAAIH,KAAK,CAACI,MAAM,CAACD,KAAK;IAChC,MAAME,OAAM,GAAId,GAAG,CAAC,CAAC,CAAC;IAEtB,MAAMe,KAAI,GAAIZ,QAAQ,CAAC,MAAM;MACzB,IAAIY,KAAI,GAAI,EAAE;MAEd,KAAK,IAAIC,IAAI,CAAC,EAAEA,KAAKN,QAAQ,CAACO,KAAK,EAAED,CAAC,EAAE,EAAE;QACtCD,KAAK,CAACG,IAAI,CAACF,CAAC;MAChB;MAEA,OAAOD,KAAK;IAChB,CAAC;IAED,MAAMI,SAAQ,GAAI,gBAAgBC,IAAI,EAAE;MAEpC,IAAIC,QAAO,GAAI,MAAMC,KAAK,CAAC,cAAa,GAAIV,KAAI,GAAI,WAAU,GAAIE,OAAO,CAACG,KAAI,GAAI,QAAO,GAAIG,IAAI,CAAC;MAElG,IAAIC,QAAQ,CAACE,EAAE,EAAE;QACb,IAAIC,IAAG,GAAI,MAAMH,QAAQ,CAACI,IAAI,EAAE;QAChCjB,OAAO,CAACS,KAAI,GAAIO,IAAI,CAAChB,OAAO;QAC5BE,QAAQ,CAACO,KAAI,GAAIO,IAAI,CAACT,KAAK;MAC/B,OAAO;QACHW,KAAK,CAACL,QAAQ,CAACM,UAAU,CAAC;MAC9B;MAEAC,OAAO,CAACC,GAAG,CAACrB,OAAO;IACvB,CAAC;IAEDP,KAAK,CAACU,WAAW,EAAE,MAAM;MACrBQ,SAAS,CAACR,WAAW,CAACM,KAAK;IAC/B,CAAC,CAAC;IAEFf,SAAS,CAAC,YAAY;MAClBiB,SAAS,CAAC,CAAC;IACf,CAAC;IAED,OAAO;MACHX,OAAO;MACPW,SAAS;MACTR,WAAW;MACXI;IACJ;EACJ;AACJ","names":["useRoute","ref","watch","onMounted","computed","TheCards","name","components","setup","records","route","lastPage","currentPage","input","params","perPage","pages","i","value","push","fetchPage","page","response","fetch","ok","data","json","alert","statusText","console","log"],"sourceRoot":"","sources":["/Users/yeelam/Documents/Year3 sem1/COMP3047/Lab/Asm03/Front/src/views/SearchView.vue"],"sourcesContent":["<template>\n    <nav aria-label=\"breadcrumb\">\n        <ol class=\"breadcrumb\">\n            <li class=\"breadcrumb-item\"><a href=\"/\">Home</a></li>\n            <li class=\"breadcrumb-item active\" aria-current=\"page\">Search Results</li>\n        </ol>\n    </nav>\n    <div class=\"row row-cols-1 row-cols-md-3 g-4\">\n        <TheCards v-for=\"r in records\" :key=\"r._id\" :id=\"r._id\" :type=\"type\" :src=\"r.image\" :title=\"r.title\"\n            :descriptions=\"r.descriptions\" />\n    </div>\n    <nav aria-label=\"Page navigation example\">\n        <ul class=\"pagination\">\n            <li class=\"page-item\">\n                <a a v-if=\"currentPage > 1\" class=\"page-link\" @click=\"currentPage--\">\n                    <span aria-hidden=\"true\">&laquo;</span>\n                </a>\n            </li>\n            <li class=\"page-item\"><a v-if=\"currentPage > 2\" class=\"page-link\" @click=\"currentPage = currentPage - 2\">{{\n                    currentPage - 2\n            }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage > 1\" class=\"page-link\" @click=\"currentPage--\">{{ currentPage - 1\n            }}</a></li>\n            <li class=\"page-item\"><a class=\"page-link active\">{{ currentPage }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage < pages.length\" class=\"page-link\" @click=\"currentPage++\">{{\n                    currentPage + 1\n            }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage < pages.length - 1\" class=\"page-link\"\n                    @click=\"currentPage = currentPage + 2\">{{ currentPage + 2 }}</a></li>\n            <li class=\"page-item\">\n                <a v-if=\"currentPage < pages.length\" class=\"page-link\" @click=\"currentPage++\">\n                    <span aria-hidden=\"true\">&raquo;</span>\n                </a>\n            </li>\n        </ul>\n    </nav>\n</template>\n\n<script>\nimport { useRoute } from 'vue-router';\nimport { ref, watch, onMounted, computed } from 'vue';\nimport TheCards from '@/components/TheCards.vue';\n\nexport default {\n    name: 'SearchView',\n    components: {\n        TheCards\n    },\n    setup() {\n        const records = ref([]);\n        const route = useRoute();\n        const lastPage = ref(0);\n        const currentPage = ref(1);\n        const input = route.params.input;\n        const perPage = ref(6);\n\n        const pages = computed(() => {\n            var pages = [];\n\n            for (var i = 1; i <= lastPage.value; i++) {\n                pages.push(i)\n            }\n\n            return pages;\n        })\n\n        const fetchPage = async function (page) {\n\n            var response = await fetch(\"/api/search/\" + input + \"?perPage=\" + perPage.value + \"&page=\" + page);\n\n            if (response.ok) {\n                var data = await response.json();\n                records.value = data.records;\n                lastPage.value = data.pages;\n            } else {\n                alert(response.statusText);\n            }\n\n            console.log(records)\n        };\n\n        watch(currentPage, () => {\n            fetchPage(currentPage.value)\n        });\n\n        onMounted(function () {\n            fetchPage(1)\n        })\n\n        return {\n            records,\n            fetchPage,\n            currentPage,\n            pages\n        }\n    }\n}\n\n</script>"]},"metadata":{},"sourceType":"module"}
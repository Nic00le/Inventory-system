{"ast":null,"code":"import { ref } from \"vue\";\nimport jwt_decode from \"jwt-decode\";\nexport default {\n  name: 'LoginView',\n  setup() {\n    const credential = ref({});\n    const login = async function () {\n      var response = await fetch(\"/api/user/login\", {\n        method: \"post\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(credential.value)\n      });\n      if (response.ok) {\n        var data = await response.json();\n        localStorage.setItem(\"token\", data.token);\n        localStorage.setItem(\"type\", data.type);\n        alert(data.type);\n        var decoded = jwt_decode(data.token);\n        alert(JSON.stringify(decoded));\n\n        // alert(JSON.stringify(data))\n        alert(\"login Successfully.\");\n        location.assign(\"/\");\n      } else {\n        alert(response.statusText);\n      }\n    };\n    return {\n      credential,\n      login\n    };\n  }\n};","map":{"version":3,"mappings":"AAkBA,SAASA,GAAE,QAAS,KAAK;AACzB,OAAOC,UAAS,MAAO,YAAY;AAGnC,eAAe;EACXC,IAAI,EAAE,WAAW;EACjBC,KAAK,GAAG;IACJ,MAAMC,UAAS,GAAIJ,GAAG,CAAC,CAAC,CAAC,CAAC;IAE1B,MAAMK,KAAI,GAAI,kBAAkB;MAE5B,IAAIC,QAAO,GAAI,MAAMC,KAAK,CAAC,iBAAiB,EAAE;QAC1CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACL,cAAc,EAAE;QACpB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,UAAU,CAACS,KAAK;MACzC,CAAC,CAAC;MAEF,IAAIP,QAAQ,CAACQ,EAAE,EAAE;QACb,IAAIC,IAAG,GAAI,MAAMT,QAAQ,CAACU,IAAI,EAAC;QAC/BC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,IAAI,CAACI,KAAK,CAAC;QACzCF,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEH,IAAI,CAACK,IAAI,CAAC;QAEvCC,KAAK,CAACN,IAAI,CAACK,IAAI;QAEf,IAAIE,OAAM,GAAIrB,UAAU,CAACc,IAAI,CAACI,KAAK,CAAC;QACpCE,KAAK,CAACV,IAAI,CAACC,SAAS,CAACU,OAAO,CAAC;;QAE7B;QACAD,KAAK,CAAC,qBAAqB;QAC3BE,QAAQ,CAACC,MAAM,CAAC,GAAG;MACvB,OAAO;QACHH,KAAK,CAACf,QAAQ,CAACmB,UAAU;MAC7B;IACJ;IAEA,OAAO;MACHrB,UAAU;MAAEC;IAChB;EACJ;AACJ","names":["ref","jwt_decode","name","setup","credential","login","response","fetch","method","headers","body","JSON","stringify","value","ok","data","json","localStorage","setItem","token","type","alert","decoded","location","assign","statusText"],"sourceRoot":"","sources":["/Users/yeelam/Documents/Year3 sem1/COMP3047/Lab/Asm03/Front/src/views/LoginView.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <form @submit.prevent=\"login()\">\n            <div class=\"mb-3\">\n                <label for=\"exampleInputEmail1\" class=\"form-label\">Email address</label>\n                <input type=\"email\" class=\"form-control\" v-model=\"credential.email\" aria-describedby=\"emailHelp\">\n                <div id=\"emailHelp\" class=\"form-text\">We'll never share your email with anyone else.</div>\n            </div>\n            <div class=\"mb-3\">\n                <label for=\"exampleInputPassword1\" class=\"form-label\">Password</label>\n                <input type=\"password\" class=\"form-control\" v-model=\"credential.password\">\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Login</button>\n        </form>\n    </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport jwt_decode from \"jwt-decode\";\n\n\nexport default {\n    name: 'LoginView',\n    setup() {\n        const credential = ref({});\n\n        const login = async function () {\n\n            var response = await fetch(\"/api/user/login\", {\n                method: \"post\",\n                headers: {\n                    \"content-type\": \"application/json\"\n                },\n                body: JSON.stringify(credential.value)\n            });\n\n            if (response.ok) {\n                var data = await response.json()\n                localStorage.setItem(\"token\", data.token);\n                localStorage.setItem(\"type\", data.type);\n\n                alert(data.type)\n\n                var decoded = jwt_decode(data.token);\n                alert(JSON.stringify(decoded))\n\n                // alert(JSON.stringify(data))\n                alert(\"login Successfully.\")\n                location.assign(\"/\")\n            } else {\n                alert(response.statusText)\n            }\n        }\n\n        return {\n            credential, login\n        }\n    }\n}\n</script>\n  "]},"metadata":{},"sourceType":"module"}
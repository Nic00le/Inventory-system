{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport UserCard from \"@/components/UserCard.vue\";\nimport { ref, onMounted, computed, watch } from \"vue\";\nimport { useRoute } from 'vue-router';\nexport default {\n  name: 'UserView',\n  components: {\n    UserCard\n  },\n  setup() {\n    const users = ref([]);\n    const lastPage = ref(0);\n    const perPage = ref(6);\n    const currentPage = ref(1);\n    const fetchPage = async function (page) {\n      var response = await fetch(\"/api/users/?perPage=\" + perPage.value + \"&page=\" + page);\n      if (response.ok) {\n        var data = await response.json();\n        users.value = data.records;\n        lastPage.value = data.pages;\n      } else {\n        alert(response.statusText);\n      }\n    };\n    const pages = computed(() => {\n      var pages = [];\n      for (var i = 1; i <= lastPage.value; i++) {\n        pages.push(i);\n      }\n      return pages;\n    });\n    onMounted(function () {\n      fetchPage(1);\n    });\n    watch(currentPage, () => {\n      fetchPage(currentPage.value);\n    });\n    return {\n      users,\n      pages,\n      fetchPage,\n      currentPage\n    };\n  }\n};","map":{"version":3,"mappings":";AAkBA,OAAOA,QAAO,MAAO,2BAA2B;AAChD,SAASC,GAAG,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,KAAI,QAAS,KAAK;AACrD,SAASC,QAAO,QAAS,YAAY;AAErC,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVP;EACF,CAAC;EACDQ,KAAK,GAAG;IACN,MAAMC,KAAI,GAAIR,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMS,QAAO,GAAIT,GAAG,CAAC,CAAC,CAAC;IACvB,MAAMU,OAAM,GAAIV,GAAG,CAAC,CAAC,CAAC;IACtB,MAAMW,WAAU,GAAIX,GAAG,CAAC,CAAC,CAAC;IAE1B,MAAMY,SAAQ,GAAI,gBAAgBC,IAAI,EAAE;MAEtC,IAAIC,QAAO,GAAI,MAAMC,KAAK,CAAC,sBAAqB,GAAIL,OAAO,CAACM,KAAI,GAAI,QAAO,GAAIH,IAAI,CAAC;MAEpF,IAAIC,QAAQ,CAACG,EAAE,EAAE;QACf,IAAIC,IAAG,GAAI,MAAMJ,QAAQ,CAACK,IAAI,EAAE;QAChCX,KAAK,CAACQ,KAAI,GAAIE,IAAI,CAACE,OAAO;QAC1BX,QAAQ,CAACO,KAAI,GAAIE,IAAI,CAACG,KAAK;MAC7B,OAAO;QACLC,KAAK,CAACR,QAAQ,CAACS,UAAU,CAAC;MAC5B;IACF,CAAC;IAED,MAAMF,KAAI,GAAInB,QAAQ,CAAC,MAAM;MAC3B,IAAImB,KAAI,GAAI,EAAE;MAEd,KAAK,IAAIG,IAAI,CAAC,EAAEA,KAAKf,QAAQ,CAACO,KAAK,EAAEQ,CAAC,EAAE,EAAE;QACxCH,KAAK,CAACI,IAAI,CAACD,CAAC;MACd;MAEA,OAAOH,KAAK;IACd,CAAC;IAEDpB,SAAS,CAAC,YAAY;MACpBW,SAAS,CAAC,CAAC,CAAC;IACd,CAAC,CAAC;IAEFT,KAAK,CAACQ,WAAW,EAAE,MAAM;MACvBC,SAAS,CAACD,WAAW,CAACK,KAAK;IAC7B,CAAC,CAAC;IAEF,OAAO;MACLR,KAAK;MACLa,KAAK;MACLT,SAAS;MACTD;IACF,CAAC;EAEH;AACF","names":["UserCard","ref","onMounted","computed","watch","useRoute","name","components","setup","users","lastPage","perPage","currentPage","fetchPage","page","response","fetch","value","ok","data","json","records","pages","alert","statusText","i","push"],"sourceRoot":"","sources":["/Users/yeelam/Documents/Year3 sem1/COMP3047/Lab/Asm03/Front/src/views/UsersView.vue"],"sourcesContent":["<template>\n  <div>\n    <nav aria-label=\"breadcrumb\">\n      <ol class=\"breadcrumb\">\n        <li class=\"breadcrumb-item\"><a href=\"/\">Home</a></li>\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Users</li>\n      </ol>\n    </nav>\n  </div>\n  <div class=\"row row-cols-1 row-cols-md-3 g-4\">\n    <TheCards v-for=\"u in users\" :key=\"u._id\" :id=\"u._id\" :name=\"u.name\" :email=\"u.email\" />\n  </div>\n\n</template>\n\n\n<script>\n\nimport UserCard from \"@/components/UserCard.vue\";\nimport { ref, onMounted, computed, watch } from \"vue\";\nimport { useRoute } from 'vue-router';\n\nexport default {\n  name: 'UserView',\n  components: {\n    UserCard\n  },\n  setup() {\n    const users = ref([]);\n    const lastPage = ref(0);\n    const perPage = ref(6);\n    const currentPage = ref(1);\n\n    const fetchPage = async function (page) {\n\n      var response = await fetch(\"/api/users/?perPage=\" + perPage.value + \"&page=\" + page);\n\n      if (response.ok) {\n        var data = await response.json();\n        users.value = data.records;\n        lastPage.value = data.pages;\n      } else {\n        alert(response.statusText);\n      }\n    };\n\n    const pages = computed(() => {\n      var pages = [];\n\n      for (var i = 1; i <= lastPage.value; i++) {\n        pages.push(i)\n      }\n\n      return pages;\n    })\n\n    onMounted(function () {\n      fetchPage(1);\n    });\n\n    watch(currentPage, () => {\n      fetchPage(currentPage.value)\n    });\n\n    return {\n      users,\n      pages,\n      fetchPage,\n      currentPage,\n    };\n\n  }\n}\n\n</script>\n\n\n    "]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import \"core-js/modules/es.typed-array.find-last.js\";\nimport \"core-js/modules/es.typed-array.find-last-index.js\";\nimport { ref } from \"vue\";\nexport default {\n  name: \"TheCards\",\n  props: {\n    id: String,\n    type: String,\n    src: String,\n    title: String,\n    descriptions: String,\n    quantity: Int32Array,\n    borrower: String\n  },\n  setup(props) {\n    const path = \"/\" + props.type + \"/detail/\" + props.id;\n    const userId = localStorage.getItem(\"userId\");\n    const borrowerName = async function () {\n      var response = await fetch(\"/api/user/detail/\" + props.borrower);\n      if (response.ok) {\n        var data = await response.json();\n        return data.name;\n      } else {\n        alert(response.statusText);\n      }\n    };\n    const borrow = async function () {\n      let token = ref(localStorage.getItem('token'));\n      let path = \"/api/user/borrow/\" + props.id;\n      var response = await fetch(path, {\n        method: \"post\",\n        headers: {\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          \"x-access-token\": token.value\n        }\n      });\n      if (response.ok) {\n        var text = await response.text();\n        alert(text);\n        location.reload();\n      } else {\n        alert(response.statusText);\n      }\n    };\n    const comsume = async function () {\n      let token = ref(localStorage.getItem('token'));\n      let path = \"/api/user/comsume/\" + props.id;\n      var response = await fetch(path, {\n        method: \"post\",\n        headers: {\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          \"x-access-token\": token.value\n        }\n      });\n      if (response.ok) {\n        var text = await response.text();\n        alert(text);\n        location.reload();\n      } else {\n        alert(response.statusText);\n      }\n    };\n    const returnItem = async function () {\n      let token = ref(localStorage.getItem('token'));\n      let path = \"/api/user/return/\" + props.id;\n      var response = await fetch(path, {\n        method: \"post\",\n        headers: {\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          \"x-access-token\": token.value\n        }\n      });\n      if (response.ok) {\n        var text = await response.text();\n        alert(text);\n        location.reload();\n      } else {\n        alert(response.statusText);\n      }\n    };\n    return {\n      path,\n      borrow,\n      comsume,\n      returnItem,\n      userId,\n      borrowerName\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","name","props","id","String","type","src","title","descriptions","quantity","Int32Array","borrower","setup","path","userId","localStorage","getItem","borrowerName","response","fetch","ok","data","json","alert","statusText","borrow","token","method","headers","value","text","location","reload","comsume","returnItem"],"sourceRoot":"","sources":["/Users/yeelam/Documents/Year3 sem1/COMP3047/Lab/Asm03/Front/src/components/TheCards.vue"],"sourcesContent":["<template>\n  <div class=\"col\">\n    <!-- <RouterLink :to=\"path\"> -->\n    <div class=\"card\">\n      <img :src=\"src\" class=\"card-img-top\" alt=\"Photo is gone\">\n      <div class=\"card-body\">\n        <a :href=\"path\">\n          <h5 class=\"card-title\">{{ title }}</h5>\n          <p>{{ descriptions }}</p>\n        </a>\n        <div v-if=\"type == 'books' || type == 'games'\">\n          <p v-if=\"borrower\">Borrowed by {{ borrowerName }}</p>\n          <button v-if=\"!borrower\" type=\"button\" class=\"btn btn-primary\" @click=\"borrow\">Borrow</button>\n          <button v-if=\"borrower == userId\" type=\"button\" class=\"btn btn-outline-primary\"\n            @click=\"returnItem\">Return</button>\n        </div>\n        <div v-if=\"type == 'gifts' || type == 'materials'\">\n          <p>Availability: {{ quantity }}</p>\n          <button v-if=\"quantity > 0\" type=\"button\" class=\"btn btn-primary\" @click=\"comsume\">Comsume</button>\n        </div>\n      </div>\n    </div>\n    <!-- </RouterLink> -->\n  </div>\n</template>\n\n<style>\na {\n  color: #202223;\n  text-decoration: none;\n}\n</style>\n\n<script>\nimport { ref } from \"vue\";\n\nexport default {\n  name: \"TheCards\",\n  props: {\n    id: String,\n    type: String,\n    src: String,\n    title: String,\n    descriptions: String,\n    quantity: Int32Array,\n    borrower: String\n  },\n  setup(props) {\n    const path = \"/\" + props.type + \"/detail/\" + props.id;\n    const userId = localStorage.getItem(\"userId\");\n\n    const borrowerName = async function () {\n      var response = await fetch(\"/api/user/detail/\" + props.borrower)\n      if (response.ok) {\n        var data = await response.json();\n        return data.name\n      } else {\n        alert(response.statusText);\n      }\n    }\n\n    const borrow = async function () {\n      let token = ref(localStorage.getItem('token'));\n      let path = \"/api/user/borrow/\" + props.id;\n\n      var response = await fetch(path, {\n        method: \"post\",\n        headers: {\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          \"x-access-token\": token.value\n        }\n      });\n      if (response.ok) {\n        var text = await response.text();\n        alert(text);\n        location.reload();\n      } else {\n        alert(response.statusText);\n      }\n\n    }\n\n    const comsume = async function () {\n      let token = ref(localStorage.getItem('token'));\n      let path = \"/api/user/comsume/\" + props.id;\n\n      var response = await fetch(path, {\n        method: \"post\",\n        headers: {\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          \"x-access-token\": token.value\n        }\n      });\n      if (response.ok) {\n        var text = await response.text();\n        alert(text);\n        location.reload();\n      } else {\n        alert(response.statusText);\n      }\n\n    }\n\n    const returnItem = async function () {\n      let token = ref(localStorage.getItem('token'));\n      let path = \"/api/user/return/\" + props.id;\n\n      var response = await fetch(path, {\n        method: \"post\",\n        headers: {\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          \"x-access-token\": token.value\n        }\n      });\n      if (response.ok) {\n        var text = await response.text();\n        alert(text);\n        location.reload();\n      } else {\n        alert(response.statusText);\n      }\n\n    }\n\n    return {\n      path,\n      borrow,\n      comsume,\n      returnItem,\n      userId,\n      borrowerName\n    }\n  }\n}\n</script>"]},"metadata":{},"sourceType":"module"}
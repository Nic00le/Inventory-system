{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createStaticVNode(\"<nav aria-label=\\\"breadcrumb\\\"><ol class=\\\"breadcrumb\\\"><li class=\\\"breadcrumb-item\\\"><a href=\\\"/\\\">Home</a></li><li class=\\\"breadcrumb-item active\\\" aria-current=\\\"page\\\">Search Results</li></ol></nav>\", 1);\nconst _hoisted_2 = {\n  class: \"row row-cols-1 row-cols-md-3 g-4\"\n};\nconst _hoisted_3 = {\n  \"aria-label\": \"Page navigation example\"\n};\nconst _hoisted_4 = {\n  class: \"pagination\"\n};\nconst _hoisted_5 = {\n  class: \"page-item\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"span\", {\n  \"aria-hidden\": \"true\"\n}, \"«\", -1 /* HOISTED */);\nconst _hoisted_7 = [_hoisted_6];\nconst _hoisted_8 = {\n  class: \"page-item\"\n};\nconst _hoisted_9 = {\n  class: \"page-item\"\n};\nconst _hoisted_10 = {\n  class: \"page-item\"\n};\nconst _hoisted_11 = {\n  class: \"page-link active\"\n};\nconst _hoisted_12 = {\n  class: \"page-item\"\n};\nconst _hoisted_13 = {\n  class: \"page-item\"\n};\nconst _hoisted_14 = {\n  class: \"page-item\"\n};\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"span\", {\n  \"aria-hidden\": \"true\"\n}, \"»\", -1 /* HOISTED */);\nconst _hoisted_16 = [_hoisted_15];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_TheCards = _resolveComponent(\"TheCards\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.records, r => {\n    return _openBlock(), _createBlock(_component_TheCards, {\n      key: r._id,\n      id: r._id,\n      type: _ctx.type,\n      src: r.image,\n      title: r.title,\n      descriptions: r.descriptions\n    }, null, 8 /* PROPS */, [\"id\", \"type\", \"src\", \"title\", \"descriptions\"]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"nav\", _hoisted_3, [_createElementVNode(\"ul\", _hoisted_4, [_createElementVNode(\"li\", _hoisted_5, [$setup.currentPage > 1 ? (_openBlock(), _createElementBlock(\"a\", {\n    key: 0,\n    a: \"\",\n    class: \"page-link\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.currentPage--)\n  }, _hoisted_7)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"li\", _hoisted_8, [$setup.currentPage > 2 ? (_openBlock(), _createElementBlock(\"a\", {\n    key: 0,\n    class: \"page-link\",\n    onClick: _cache[1] || (_cache[1] = $event => $setup.currentPage = $setup.currentPage - 2)\n  }, _toDisplayString($setup.currentPage - 2), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"li\", _hoisted_9, [$setup.currentPage > 1 ? (_openBlock(), _createElementBlock(\"a\", {\n    key: 0,\n    class: \"page-link\",\n    onClick: _cache[2] || (_cache[2] = $event => $setup.currentPage--)\n  }, _toDisplayString($setup.currentPage - 1), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"li\", _hoisted_10, [_createElementVNode(\"a\", _hoisted_11, _toDisplayString($setup.currentPage), 1 /* TEXT */)]), _createElementVNode(\"li\", _hoisted_12, [$setup.currentPage < $setup.pages.length ? (_openBlock(), _createElementBlock(\"a\", {\n    key: 0,\n    class: \"page-link\",\n    onClick: _cache[3] || (_cache[3] = $event => $setup.currentPage++)\n  }, _toDisplayString($setup.currentPage + 1), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"li\", _hoisted_13, [$setup.currentPage < $setup.pages.length - 1 ? (_openBlock(), _createElementBlock(\"a\", {\n    key: 0,\n    class: \"page-link\",\n    onClick: _cache[4] || (_cache[4] = $event => $setup.currentPage = $setup.currentPage + 2)\n  }, _toDisplayString($setup.currentPage + 2), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"li\", _hoisted_14, [$setup.currentPage < $setup.pages.length ? (_openBlock(), _createElementBlock(\"a\", {\n    key: 0,\n    class: \"page-link\",\n    onClick: _cache[5] || (_cache[5] = $event => $setup.currentPage++)\n  }, _hoisted_16)) : _createCommentVNode(\"v-if\", true)])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;;EAOSA,KAAK,EAAC;AAAkC;;EAIxC,YAAU,EAAC;AAAyB;;EACjCA,KAAK,EAAC;AAAY;;EACdA,KAAK,EAAC;AAAW;gCAEbC,oBAAuC;EAAjC,aAAW,EAAC;AAAM,GAAC,GAAO;oBAAhCC,UAAuC;;EAG3CF,KAAK,EAAC;AAAW;;EAGjBA,KAAK,EAAC;AAAW;;EAEjBA,KAAK,EAAC;AAAW;;EAAIA,KAAK,EAAC;AAAkB;;EAC7CA,KAAK,EAAC;AAAW;;EAGjBA,KAAK,EAAC;AAAW;;EAEjBA,KAAK,EAAC;AAAW;iCAEbC,oBAAuC;EAAjC,aAAW,EAAC;AAAM,GAAC,GAAO;qBAAhCE,WAAuC;;;6DA9BvDC,UAKM,EACNH,oBAGM,OAHNI,UAGM,sBAFFC,oBACqCC,6BADfC,cAAO,EAAZC,CAAC;yBAAlBC,aACqCC;MADLC,GAAG,EAAEH,CAAC,CAACI,GAAG;MAAGC,EAAE,EAAEL,CAAC,CAACI,GAAG;MAAGE,IAAI,EAAEC,SAAI;MAAGC,GAAG,EAAER,CAAC,CAACS,KAAK;MAAGC,KAAK,EAAEV,CAAC,CAACU,KAAK;MAC9FC,YAAY,EAAEX,CAAC,CAACW;;oCAEzBnB,oBAwBM,OAxBNoB,UAwBM,GAvBFpB,oBAsBK,MAtBLqB,UAsBK,GArBDrB,oBAIK,MAJLsB,UAIK,GAHUf,kBAAW,sBAAtBF,oBAEI;;IAFDkB,CAAC,EAAD,EAAC;IAAwBxB,KAAK,EAAC,WAAW;IAAEyB,OAAK,sCAAEjB,kBAAW;yDAIrEP,oBAEW,MAFXyB,UAEW,GAFoBlB,kBAAW,sBAApBF,oBAEhB;;IAF0CN,KAAK,EAAC,WAAW;IAAEyB,OAAK,sCAAEjB,kBAAW,GAAGA,kBAAW;sBAC3FA,kBAAW,6DAEnBP,oBACW,MADX0B,UACW,GADoBnB,kBAAW,sBAApBF,oBAChB;;IAD0CN,KAAK,EAAC,WAAW;IAAEyB,OAAK,sCAAEjB,kBAAW;sBAAOA,kBAAW,6DAEvGP,oBAA4E,MAA5E2B,WAA4E,GAAtD3B,oBAAiD,KAAjD4B,WAAiD,mBAAlBrB,kBAAW,oBAChEP,oBAEW,MAFX6B,WAEW,GAFoBtB,kBAAW,GAAGA,YAAK,CAACuB,MAAM,kBAAnCzB,oBAEhB;;IAFqDN,KAAK,EAAC,WAAW;IAAEyB,OAAK,sCAAEjB,kBAAW;sBACxFA,kBAAW,6DAEnBP,oBAC6E,MAD7E+B,WAC6E,GAD9CxB,kBAAW,GAAGA,YAAK,CAACuB,MAAM,sBAAnCzB,oBACkD;;IADTN,KAAK,EAAC,WAAW;IACvEyB,OAAK,sCAAEjB,kBAAW,GAAGA,kBAAW;sBAASA,kBAAW,6DAC7DP,oBAIK,MAJLgC,WAIK,GAHQzB,kBAAW,GAAGA,YAAK,CAACuB,MAAM,kBAAnCzB,oBAEI;;IAFiCN,KAAK,EAAC,WAAW;IAAEyB,OAAK,sCAAEjB,kBAAW","names":["class","_createElementVNode","_hoisted_6","_hoisted_15","_hoisted_1","_hoisted_2","_createElementBlock","_Fragment","$setup","r","_createBlock","_component_TheCards","key","_id","id","type","_ctx","src","image","title","descriptions","_hoisted_3","_hoisted_4","_hoisted_5","a","onClick","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","length","_hoisted_13","_hoisted_14"],"sourceRoot":"","sources":["/Users/yeelam/Documents/Year3 sem1/COMP3047/Lab/Asm03/Front/src/views/SearchView.vue"],"sourcesContent":["<template>\n    <nav aria-label=\"breadcrumb\">\n        <ol class=\"breadcrumb\">\n            <li class=\"breadcrumb-item\"><a href=\"/\">Home</a></li>\n            <li class=\"breadcrumb-item active\" aria-current=\"page\">Search Results</li>\n        </ol>\n    </nav>\n    <div class=\"row row-cols-1 row-cols-md-3 g-4\">\n        <TheCards v-for=\"r in records\" :key=\"r._id\" :id=\"r._id\" :type=\"type\" :src=\"r.image\" :title=\"r.title\"\n            :descriptions=\"r.descriptions\" />\n    </div>\n    <nav aria-label=\"Page navigation example\">\n        <ul class=\"pagination\">\n            <li class=\"page-item\">\n                <a a v-if=\"currentPage > 1\" class=\"page-link\" @click=\"currentPage--\">\n                    <span aria-hidden=\"true\">&laquo;</span>\n                </a>\n            </li>\n            <li class=\"page-item\"><a v-if=\"currentPage > 2\" class=\"page-link\" @click=\"currentPage = currentPage - 2\">{{\n                    currentPage - 2\n            }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage > 1\" class=\"page-link\" @click=\"currentPage--\">{{ currentPage - 1\n            }}</a></li>\n            <li class=\"page-item\"><a class=\"page-link active\">{{ currentPage }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage < pages.length\" class=\"page-link\" @click=\"currentPage++\">{{\n                    currentPage + 1\n            }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage < pages.length - 1\" class=\"page-link\"\n                    @click=\"currentPage = currentPage + 2\">{{ currentPage + 2 }}</a></li>\n            <li class=\"page-item\">\n                <a v-if=\"currentPage < pages.length\" class=\"page-link\" @click=\"currentPage++\">\n                    <span aria-hidden=\"true\">&raquo;</span>\n                </a>\n            </li>\n        </ul>\n    </nav>\n</template>\n\n<script>\nimport { useRoute } from 'vue-router';\nimport { ref, watch, onMounted, computed } from 'vue';\nimport TheCards from '@/components/TheCards.vue';\n\nexport default {\n    name: 'SearchView',\n    components: {\n        TheCards\n    },\n    setup() {\n        const records = ref([]);\n        const route = useRoute();\n        const lastPage = ref(0);\n        const currentPage = ref(1);\n        const input = route.params.input;\n        const perPage = ref(6);\n\n        const pages = computed(() => {\n            var pages = [];\n\n            for (var i = 1; i <= lastPage.value; i++) {\n                pages.push(i)\n            }\n\n            return pages;\n        })\n\n        const fetchPage = async function (page) {\n\n            var response = await fetch(\"/api/search/\" + input + \"?perPage=\" + perPage.value + \"&page=\" + page);\n\n            if (response.ok) {\n                var data = await response.json();\n                records.value = data.records;\n                lastPage.value = data.pages;\n            } else {\n                alert(response.statusText);\n            }\n\n            console.log(records)\n        };\n\n        watch(currentPage, () => {\n            fetchPage(currentPage.value)\n        });\n\n        onMounted(function () {\n            fetchPage(1)\n        })\n\n        return {\n            records,\n            fetchPage,\n            currentPage,\n            pages\n        }\n    }\n}\n\n</script>"]},"metadata":{},"sourceType":"module"}
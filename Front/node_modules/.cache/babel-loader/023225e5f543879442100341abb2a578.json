{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport TheCards from '@/components/TheCards.vue';\nimport { ref, onMounted, computed, watch } from \"vue\";\nimport { useRoute } from 'vue-router';\nexport default {\n  name: 'TypeView',\n  components: {\n    TheCards\n  },\n  setup() {\n    const records = ref([]);\n    const lastPage = ref(0);\n    const perPage = ref(6);\n    const route = useRoute();\n    const type = route.params.type;\n    const currentPage = ref(1);\n    const add = async function () {\n      location.assign(\"/\" + route.params.type + \"/detail\");\n    };\n    const pages = computed(() => {\n      var pages = [];\n      for (var i = 1; i <= lastPage.value; i++) {\n        pages.push(i);\n      }\n      return pages;\n    });\n    const fetchPage = async function (page) {\n      var response = await fetch(\"/api/\" + type + \"?perPage=\" + perPage.value + \"&page=\" + page);\n      if (response.ok) {\n        var data = await response.json();\n        records.value = data.records;\n        lastPage.value = data.pages;\n        for (var i = 1; i <= lastPage.value; i++) {\n          console.log(records[i].value.borrow);\n        }\n      } else {\n        alert(response.statusText);\n      }\n    };\n    onMounted(function () {\n      fetchPage(1);\n      // alert(props.msg)\n    });\n\n    watch(currentPage, () => {\n      fetchPage(currentPage.value);\n    });\n    return {\n      records,\n      pages,\n      fetchPage,\n      type,\n      currentPage,\n      add\n    };\n  }\n};","map":{"version":3,"mappings":";AAyCA,OAAOA,QAAO,MAAO,2BAA0B;AAC/C,SAASC,GAAG,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,KAAI,QAAS,KAAK;AACrD,SAASC,QAAO,QAAS,YAAY;AAErC,eAAe;EACXC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACRP;EACJ,CAAC;EACDQ,KAAK,GAAG;IACJ,MAAMC,OAAM,GAAIR,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMS,QAAO,GAAIT,GAAG,CAAC,CAAC,CAAC;IACvB,MAAMU,OAAM,GAAIV,GAAG,CAAC,CAAC,CAAC;IACtB,MAAMW,KAAI,GAAIP,QAAQ,EAAE;IACxB,MAAMQ,IAAG,GAAID,KAAK,CAACE,MAAM,CAACD,IAAI;IAC9B,MAAME,WAAU,GAAId,GAAG,CAAC,CAAC,CAAC;IAE1B,MAAMe,GAAE,GAAI,kBAAkB;MAC1BC,QAAQ,CAACC,MAAM,CAAC,GAAE,GAAIN,KAAK,CAACE,MAAM,CAACD,IAAG,GAAI,SAAS;IACvD;IAEA,MAAMM,KAAI,GAAIhB,QAAQ,CAAC,MAAM;MACzB,IAAIgB,KAAI,GAAI,EAAE;MAEd,KAAK,IAAIC,IAAI,CAAC,EAAEA,KAAKV,QAAQ,CAACW,KAAK,EAAED,CAAC,EAAE,EAAE;QACtCD,KAAK,CAACG,IAAI,CAACF,CAAC;MAChB;MAEA,OAAOD,KAAK;IAChB,CAAC;IAED,MAAMI,SAAQ,GAAI,gBAAgBC,IAAI,EAAE;MAEpC,IAAIC,QAAO,GAAI,MAAMC,KAAK,CAAC,OAAM,GAAIb,IAAG,GAAI,WAAU,GAAIF,OAAO,CAACU,KAAI,GAAI,QAAO,GAAIG,IAAI,CAAC;MAG1F,IAAIC,QAAQ,CAACE,EAAE,EAAE;QACb,IAAIC,IAAG,GAAI,MAAMH,QAAQ,CAACI,IAAI,EAAE;QAChCpB,OAAO,CAACY,KAAI,GAAIO,IAAI,CAACnB,OAAO;QAC5BC,QAAQ,CAACW,KAAI,GAAIO,IAAI,CAACT,KAAK;QAC3B,KAAK,IAAIC,IAAI,CAAC,EAAEA,KAAKV,QAAQ,CAACW,KAAK,EAAED,CAAC,EAAE,EAAE;UACtCU,OAAO,CAACC,GAAG,CAACtB,OAAO,CAACW,CAAC,CAAC,CAACC,KAAK,CAACW,MAAM;QACvC;MACJ,OAAO;QACHC,KAAK,CAACR,QAAQ,CAACS,UAAU,CAAC;MAC9B;IACJ,CAAC;IAEDhC,SAAS,CAAC,YAAY;MAClBqB,SAAS,CAAC,CAAC,CAAC;MACZ;IACJ,CAAC,CAAC;;IAEFnB,KAAK,CAACW,WAAW,EAAE,MAAM;MACrBQ,SAAS,CAACR,WAAW,CAACM,KAAK;IAC/B,CAAC,CAAC;IAEF,OAAO;MACHZ,OAAO;MACPU,KAAK;MACLI,SAAS;MACTV,IAAI;MACJE,WAAW;MACXC;IACJ,CAAC;EACL;AACJ","names":["TheCards","ref","onMounted","computed","watch","useRoute","name","components","setup","records","lastPage","perPage","route","type","params","currentPage","add","location","assign","pages","i","value","push","fetchPage","page","response","fetch","ok","data","json","console","log","borrow","alert","statusText"],"sourceRoot":"","sources":["/Users/yeelam/Documents/Year3 sem1/COMP3047/Lab/Asm03/Front/src/views/TypeView.vue"],"sourcesContent":["<template>\n    <nav aria-label=\"breadcrumb\">\n        <ol class=\"breadcrumb\">\n            <li class=\"breadcrumb-item\"><a href=\"/\">Home</a></li>\n            <li class=\"breadcrumb-item active\" aria-current=\"page\">{{ type }}</li>\n            <button type=\"button\" class=\"btn btn-primary position-absolute top-20 end-0\" @click=\"add\">Add</button>\n        </ol>\n    </nav>\n    <div class=\"row row-cols-1 row-cols-md-3 g-4\">\n        <TheCards v-for=\"r in records\" :key=\"r._id\" :id=\"r._id\" :type=\"type\" :src=\"r.image\" :title=\"r.title\"\n            :descriptions=\"r.descriptions\" :quantity=\"r.quantity\" :borrowerId=\"r.borrow.borrowerId\"\n            :borrowerName=\"r.borrow.borrowerName\" />\n    </div>\n    <nav aria-label=\"Page navigation example\">\n        <ul class=\"pagination\">\n            <li class=\"page-item\">\n                <a a v-if=\"currentPage > 1\" class=\"page-link\" @click=\"currentPage--\">\n                    <span aria-hidden=\"true\">&laquo;</span>\n                </a>\n            </li>\n            <li class=\"page-item\"><a v-if=\"currentPage > 2\" class=\"page-link\" @click=\"currentPage = currentPage - 2\">{{\n                    currentPage - 2\n            }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage > 1\" class=\"page-link\" @click=\"currentPage--\">{{ currentPage - 1\n            }}</a></li>\n            <li class=\"page-item\"><a class=\"page-link active\">{{ currentPage }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage < pages.length\" class=\"page-link\" @click=\"currentPage++\">{{\n                    currentPage + 1\n            }}</a></li>\n            <li class=\"page-item\"><a v-if=\"currentPage < pages.length - 1\" class=\"page-link\"\n                    @click=\"currentPage = currentPage + 2\">{{ currentPage + 2 }}</a></li>\n            <li class=\"page-item\">\n                <a v-if=\"currentPage < pages.length\" class=\"page-link\" @click=\"currentPage++\">\n                    <span aria-hidden=\"true\">&raquo;</span>\n                </a>\n            </li>\n        </ul>\n    </nav>\n</template>\n\n<script>\nimport TheCards from '@/components/TheCards.vue'\nimport { ref, onMounted, computed, watch } from \"vue\";\nimport { useRoute } from 'vue-router';\n\nexport default {\n    name: 'TypeView',\n    components: {\n        TheCards\n    },\n    setup() {\n        const records = ref([]);\n        const lastPage = ref(0);\n        const perPage = ref(6);\n        const route = useRoute();\n        const type = route.params.type;\n        const currentPage = ref(1);\n\n        const add = async function () {\n            location.assign(\"/\" + route.params.type + \"/detail\")\n        }\n\n        const pages = computed(() => {\n            var pages = [];\n\n            for (var i = 1; i <= lastPage.value; i++) {\n                pages.push(i)\n            }\n\n            return pages;\n        })\n\n        const fetchPage = async function (page) {\n\n            var response = await fetch(\"/api/\" + type + \"?perPage=\" + perPage.value + \"&page=\" + page);\n\n\n            if (response.ok) {\n                var data = await response.json();\n                records.value = data.records;\n                lastPage.value = data.pages;\n                for (var i = 1; i <= lastPage.value; i++) {\n                    console.log(records[i].value.borrow)\n                }\n            } else {\n                alert(response.statusText);\n            }\n        };\n\n        onMounted(function () {\n            fetchPage(1);\n            // alert(props.msg)\n        });\n\n        watch(currentPage, () => {\n            fetchPage(currentPage.value)\n        });\n\n        return {\n            records,\n            pages,\n            fetchPage,\n            type,\n            currentPage,\n            add\n        };\n    }\n}\n</script>"]},"metadata":{},"sourceType":"module"}
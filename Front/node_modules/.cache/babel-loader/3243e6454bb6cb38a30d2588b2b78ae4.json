{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport UserCard from \"@/components/UserCard.vue\";\nimport { ref, onMounted } from \"vue\";\nexport default {\n  name: 'UserView',\n  components: {\n    UserCard\n  },\n  setup() {\n    const users = ref([]);\n    const lastPage = ref(0);\n    const perPage = ref(6);\n    const route = useRoute();\n    const type = route.params.type;\n    const currentPage = ref(1);\n    const fetchPage = async function (page) {\n      var response = await fetch(\"/api/users/?perPage=\" + perPage.value + \"&page=\" + page);\n      if (response.ok) {\n        var data = await response.json();\n        users.value = data.records;\n        lastPage.value = data.pages;\n      } else {\n        alert(response.statusText);\n      }\n    };\n    const pages = computed(() => {\n      var pages = [];\n      for (var i = 1; i <= lastPage.value; i++) {\n        pages.push(i);\n      }\n      return pages;\n    });\n    onMounted(function () {\n      fetchPage(1);\n    });\n    watch(currentPage, () => {\n      fetchPage(currentPage.value);\n    });\n    return {\n      users,\n      pages,\n      fetchPage,\n      currentPage\n    };\n  }\n};","map":{"version":3,"mappings":";AAkBA,OAAOA,QAAO,MAAO,2BAA2B;AAChD,SAASC,GAAG,EAAEC,SAAS,QAAO,KAAK;AAEnC,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVJ;EACF,CAAC;EACDK,KAAK,GAAG;IACN,MAAMC,KAAI,GAAIL,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMM,QAAO,GAAIN,GAAG,CAAC,CAAC,CAAC;IACvB,MAAMO,OAAM,GAAIP,GAAG,CAAC,CAAC,CAAC;IACtB,MAAMQ,KAAI,GAAIC,QAAQ,EAAE;IACxB,MAAMC,IAAG,GAAIF,KAAK,CAACG,MAAM,CAACD,IAAI;IAC9B,MAAME,WAAU,GAAIZ,GAAG,CAAC,CAAC,CAAC;IAE1B,MAAMa,SAAQ,GAAI,gBAAgBC,IAAI,EAAE;MAEtC,IAAIC,QAAO,GAAI,MAAMC,KAAK,CAAC,sBAAqB,GAAIT,OAAO,CAACU,KAAI,GAAI,QAAO,GAAIH,IAAI,CAAC;MAEpF,IAAIC,QAAQ,CAACG,EAAE,EAAE;QACf,IAAIC,IAAG,GAAI,MAAMJ,QAAQ,CAACK,IAAI,EAAE;QAChCf,KAAK,CAACY,KAAI,GAAIE,IAAI,CAACE,OAAO;QAC1Bf,QAAQ,CAACW,KAAI,GAAIE,IAAI,CAACG,KAAK;MAC7B,OAAO;QACLC,KAAK,CAACR,QAAQ,CAACS,UAAU,CAAC;MAC5B;IACF,CAAC;IAED,MAAMF,KAAI,GAAIG,QAAQ,CAAC,MAAM;MAC3B,IAAIH,KAAI,GAAI,EAAE;MAEd,KAAK,IAAII,IAAI,CAAC,EAAEA,KAAKpB,QAAQ,CAACW,KAAK,EAAES,CAAC,EAAE,EAAE;QACxCJ,KAAK,CAACK,IAAI,CAACD,CAAC;MACd;MAEA,OAAOJ,KAAK;IACd,CAAC;IAEDrB,SAAS,CAAC,YAAY;MACpBY,SAAS,CAAC,CAAC,CAAC;IACd,CAAC,CAAC;IAEFe,KAAK,CAAChB,WAAW,EAAE,MAAM;MACvBC,SAAS,CAACD,WAAW,CAACK,KAAK;IAC7B,CAAC,CAAC;IAEF,OAAO;MACLZ,KAAK;MACLiB,KAAK;MACLT,SAAS;MACTD;IACF,CAAC;EAEH;AACF","names":["UserCard","ref","onMounted","name","components","setup","users","lastPage","perPage","route","useRoute","type","params","currentPage","fetchPage","page","response","fetch","value","ok","data","json","records","pages","alert","statusText","computed","i","push","watch"],"sourceRoot":"","sources":["/Users/yeelam/Documents/Year3 sem1/COMP3047/Lab/Asm03/Front/src/views/UsersView.vue"],"sourcesContent":["<template>\n  <div>\n    <nav aria-label=\"breadcrumb\">\n      <ol class=\"breadcrumb\">\n        <li class=\"breadcrumb-item\"><a href=\"/\">Home</a></li>\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Users</li>\n      </ol>\n    </nav>\n  </div>\n  <div class=\"row row-cols-1 row-cols-md-3 g-4\">\n    <TheCards v-for=\"u in users\" :key=\"u._id\" :id=\"u._id\" :name=\"u.name\" :email=\"u.email\" />\n  </div>\n\n</template>\n\n\n<script>\n\nimport UserCard from \"@/components/UserCard.vue\";\nimport { ref, onMounted} from \"vue\";\n\nexport default {\n  name: 'UserView',\n  components: {\n    UserCard\n  },\n  setup() {\n    const users = ref([]);\n    const lastPage = ref(0);\n    const perPage = ref(6);\n    const route = useRoute();\n    const type = route.params.type;\n    const currentPage = ref(1);\n\n    const fetchPage = async function (page) {\n\n      var response = await fetch(\"/api/users/?perPage=\" + perPage.value + \"&page=\" + page);\n\n      if (response.ok) {\n        var data = await response.json();\n        users.value = data.records;\n        lastPage.value = data.pages;\n      } else {\n        alert(response.statusText);\n      }\n    };\n\n    const pages = computed(() => {\n      var pages = [];\n\n      for (var i = 1; i <= lastPage.value; i++) {\n        pages.push(i)\n      }\n\n      return pages;\n    })\n\n    onMounted(function () {\n      fetchPage(1);\n    });\n\n    watch(currentPage, () => {\n      fetchPage(currentPage.value)\n    });\n\n    return {\n      users,\n      pages,\n      fetchPage,\n      currentPage,\n    };\n\n  }\n}\n\n</script>\n\n\n    "]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createStaticVNode(\"<div><nav aria-label=\\\"breadcrumb\\\"><ol class=\\\"breadcrumb\\\"><li class=\\\"breadcrumb-item\\\"><a href=\\\"/\\\">Home</a></li><li class=\\\"breadcrumb-item active\\\" aria-current=\\\"page\\\">Users</li></ol></nav></div>\", 1);\nconst _hoisted_2 = {\n  class: \"row row-cols-1 row-cols-md-3 g-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_UserCard = _resolveComponent(\"UserCard\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.users, u => {\n    return _openBlock(), _createBlock(_component_UserCard, {\n      key: u._id,\n      id: u._id,\n      name: u.name,\n      email: u.email\n    }, null, 8 /* PROPS */, [\"id\", \"name\", \"email\"]);\n  }), 128 /* KEYED_FRAGMENT */))])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;;EASOA,KAAK,EAAC;AAAkC;;;6DAR7CC,UAOM,EACNC,oBAEM,OAFNC,UAEM,sBADJC,oBAAwFC,6BAAlEC,YAAK,EAAVC,CAAC;yBAAlBC,aAAwFC;MAA1DC,GAAG,EAAEH,CAAC,CAACI,GAAG;MAAGC,EAAE,EAAEL,CAAC,CAACI,GAAG;MAAGE,IAAI,EAAEN,CAAC,CAACM,IAAI;MAAGC,KAAK,EAAEP,CAAC,CAACO","names":["class","_hoisted_1","_createElementVNode","_hoisted_2","_createElementBlock","_Fragment","$setup","u","_createBlock","_component_UserCard","key","_id","id","name","email"],"sourceRoot":"","sources":["/Users/yeelam/Documents/Year3 sem1/COMP3047/Lab/Asm03/Front/src/views/UsersView.vue"],"sourcesContent":["<template>\n  <div>\n    <nav aria-label=\"breadcrumb\">\n      <ol class=\"breadcrumb\">\n        <li class=\"breadcrumb-item\"><a href=\"/\">Home</a></li>\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">Users</li>\n      </ol>\n    </nav>\n  </div>\n  <div class=\"row row-cols-1 row-cols-md-3 g-4\">\n    <UserCard v-for=\"u in users\" :key=\"u._id\" :id=\"u._id\" :name=\"u.name\" :email=\"u.email\" />\n  </div>\n\n</template>\n\n\n<script>\n\nimport UserCard from \"@/components/UserCard.vue\";\nimport { ref, onMounted, computed, watch } from \"vue\";\n\nexport default {\n  name: 'UserView',\n  components: {\n    UserCard\n  },\n  setup() {\n    const users = ref([]);\n    const lastPage = ref(0);\n    const perPage = ref(6);\n    const currentPage = ref(1);\n\n    const fetchPage = async function (page) {\n\n      var response = await fetch(\"/api/users/display?perPage=\" + perPage.value + \"&page=\" + page);\n\n      if (response.ok) {\n        var data = await response.json();\n        users.value = data.records;\n        lastPage.value = data.pages;\n      } else {\n        alert(response.statusText);\n      }\n    };\n\n    const pages = computed(() => {\n      var pages = [];\n\n      for (var i = 1; i <= lastPage.value; i++) {\n        pages.push(i)\n      }\n\n      return pages;\n    })\n\n    onMounted(function () {\n      fetchPage(1);\n    });\n\n    watch(currentPage, () => {\n      fetchPage(currentPage.value)\n    });\n\n    return {\n      users,\n      pages,\n      fetchPage,\n      currentPage,\n    };\n\n  }\n}\n\n</script>\n\n\n    "]},"metadata":{},"sourceType":"module"}
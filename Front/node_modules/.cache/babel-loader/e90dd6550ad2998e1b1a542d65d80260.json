{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nexport default {\n  name: 'UserDetail',\n  props: {\n    id: String,\n    newRecord: Boolean\n  },\n  setup(props) {\n    const user = ref({});\n    onMounted(async () => {\n      if (props.id) {\n        var response = await fetch(\"/api/user/detail\" + props.id);\n        if (response.ok) {\n          users.value = await response.json();\n        }\n      }\n    });\n    const create = async function () {\n      var response = await fetch(\"/api/create\", {\n        method: \"post\",\n        headers: {\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          'Content-Type': 'application/json'\n        },\n        // body: new URLSearchParams(new FormData(event.target))\n        body: JSON.stringify(user.value)\n      });\n      console.log(user.value);\n      if (response.ok) {\n        var text = await response.text();\n        alert(text);\n        // location.assign(\"/bookings\")\n      } else {\n        alert(response.statusText);\n      }\n    };\n    const update = async function () {\n      delete user.value._id;\n      var response = await fetch(\"/api/user/update/\" + props.id, {\n        method: \"put\",\n        headers: {\n          // 'Content-Type': 'application/x-www-form-urlencoded',\n          'Content-Type': 'application/json'\n        },\n        // body: new URLSearchParams(new FormData(event.target))\n        body: JSON.stringify(user.value)\n      });\n      console.log(user.value);\n      if (response.ok) {\n        var text = await response.text();\n        alert(text);\n        // location.assign(\"/bookings\")\n      } else {\n        alert(response.statusText);\n      }\n    };\n    return {\n      user,\n      create,\n      update\n    };\n  }\n};","map":{"version":3,"mappings":"AA0CA,SAASA,GAAG,EAAEC,SAAQ,QAAS,KAAK;AAGpC,eAAe;EACXC,IAAI,EAAE,YAAY;EAClBC,KAAK,EAAE;IACHC,EAAE,EAAEC,MAAM;IACVC,SAAS,EAAEC;EACf,CAAC;EACDC,KAAK,CAACL,KAAK,EAAE;IACT,MAAMM,IAAG,GAAIT,GAAG,CAAC,CAAC,CAAC,CAAC;IAEpBC,SAAS,CAAC,YAAY;MAClB,IAAIE,KAAK,CAACC,EAAE,EAAE;QACV,IAAIM,QAAO,GAAI,MAAMC,KAAK,CAAC,kBAAiB,GAAIR,KAAK,CAACC,EAAE;QAExD,IAAIM,QAAQ,CAACE,EAAE,EAAE;UACbC,KAAK,CAACC,KAAI,GAAI,MAAMJ,QAAQ,CAACK,IAAI,EAAE;QACvC;MACJ;IACJ,CAAC,CAAC;IAEF,MAAMC,MAAK,GAAI,kBAAkB;MAE7B,IAAIN,QAAO,GAAI,MAAMC,KAAK,CAAC,aAAa,EAAE;QACtCM,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACL;UACA,cAAc,EAAE;QACpB,CAAC;QAED;QACAC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACZ,IAAI,CAACK,KAAK;MACnC,CAAC,CAAC;MACFQ,OAAO,CAACC,GAAG,CAACd,IAAI,CAACK,KAAK;MACtB,IAAIJ,QAAQ,CAACE,EAAE,EAAE;QAEb,IAAIY,IAAG,GAAI,MAAMd,QAAQ,CAACc,IAAI,EAAE;QAChCC,KAAK,CAACD,IAAI,CAAC;QACX;MACJ,OAAO;QACHC,KAAK,CAACf,QAAQ,CAACgB,UAAU;MAC7B;IACJ;IAEA,MAAMC,MAAK,GAAI,kBAAkB;MAC7B,OAAOlB,IAAI,CAACK,KAAK,CAACc,GAAG;MAErB,IAAIlB,QAAO,GAAI,MAAMC,KAAK,CAAC,mBAAkB,GAAIR,KAAK,CAACC,EAAE,EAAE;QACvDa,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACL;UACA,cAAc,EAAE;QACpB,CAAC;QAED;QACAC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACZ,IAAI,CAACK,KAAK;MACnC,CAAC,CAAC;MACFQ,OAAO,CAACC,GAAG,CAACd,IAAI,CAACK,KAAK;MACtB,IAAIJ,QAAQ,CAACE,EAAE,EAAE;QAEb,IAAIY,IAAG,GAAI,MAAMd,QAAQ,CAACc,IAAI,EAAE;QAChCC,KAAK,CAACD,IAAI,CAAC;QACX;MACJ,OAAO;QACHC,KAAK,CAACf,QAAQ,CAACgB,UAAU;MAC7B;IACJ;IAEA,OAAO;MACHjB,IAAI;MACJO,MAAM;MACNW;IACJ;EACJ;AACJ","names":["ref","onMounted","name","props","id","String","newRecord","Boolean","setup","user","response","fetch","ok","users","value","json","create","method","headers","body","JSON","stringify","console","log","text","alert","statusText","update","_id"],"sourceRoot":"","sources":["/Users/yeelam/Documents/Year3 sem1/COMP3047/Lab/Asm03/Front/src/components/UserDetail.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <form @submit.prevent=\"create()\">\n            <div class=\"row\">\n                <div class=\"form-group col-md-6\">\n                    <label for=\"exampleInputEmail1\" class=\"form-label\">Email address</label>\n                    <input type=\"email\" class=\"form-control\" v-model=\"user.email\" aria-describedby=\"email\">\n                    <div id=\"emailHelp\" class=\"form-text\">We'll never share your email with anyone else.</div>\n                </div>\n                <div class=\"form-group col-md-6\">\n                    <label for=\"exampleInputEmail1\" class=\"form-label\">Full Name</label>\n                    <input type=\"text\" class=\"form-control\" v-model=\"user.name\" aria-describedby=\"full name\">\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"form-group col-md-4\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Password</label>\n                    <input type=\"password\" class=\"form-control\" v-model=\"user.password\">\n                </div>\n                <div class=\"form-group col-md-4\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Type</label>\n                    <select class=\"form-control\" v-model=\"user.type\">\n                        <option selected>Open this select menu</option>\n                        <option value=\"admin\">Admin</option>\n                        <option value=\"user\">User</option>\n                    </select>\n                </div>\n                <div class=\"form-group col-md-4\">\n                    <label for=\"exampleInputPassword1\" class=\"form-label\">Phone</label>\n                    <input type=\"text\" class=\"form-control\" v-model=\"user.phone\">\n                </div>\n            </div>\n            <button v-if=\"!$route.params.id\" type=\"submit\" class=\"btn btn-primary\">Save</button>\n        </form>\n        <div v-if=\"$route.params.id\">\n            <button @click.prevent=\"update\" class=\"btn btn-primary\">Update</button>\n            <!-- <button @click.prevent=\"delete\" class=\"btn btn-danger\">Delete</button> -->\n        </div>\n    </div>\n</template>\n\n<script>\nimport { ref, onMounted } from \"vue\";\n\n\nexport default {\n    name: 'UserDetail',\n    props: {\n        id: String,\n        newRecord: Boolean\n    },\n    setup(props) {\n        const user = ref({});\n\n        onMounted(async () => {\n            if (props.id) {\n                var response = await fetch(\"/api/user/detail\" + props.id)\n\n                if (response.ok) {\n                    users.value = await response.json();\n                }\n            }\n        });\n\n        const create = async function () {\n\n            var response = await fetch(\"/api/create\", {\n                method: \"post\",\n                headers: {\n                    // 'Content-Type': 'application/x-www-form-urlencoded',\n                    'Content-Type': 'application/json'\n                },\n\n                // body: new URLSearchParams(new FormData(event.target))\n                body: JSON.stringify(user.value)\n            });\n            console.log(user.value)\n            if (response.ok) {\n\n                var text = await response.text();\n                alert(text);\n                // location.assign(\"/bookings\")\n            } else {\n                alert(response.statusText)\n            }\n        }\n\n        const update = async function () {\n            delete user.value._id;\n\n            var response = await fetch(\"/api/user/update/\" + props.id, {\n                method: \"put\",\n                headers: {\n                    // 'Content-Type': 'application/x-www-form-urlencoded',\n                    'Content-Type': 'application/json'\n                },\n\n                // body: new URLSearchParams(new FormData(event.target))\n                body: JSON.stringify(user.value)\n            });\n            console.log(user.value)\n            if (response.ok) {\n\n                var text = await response.text();\n                alert(text);\n                // location.assign(\"/bookings\")\n            } else {\n                alert(response.statusText)\n            }\n        }\n\n        return {\n            user,\n            create,\n            update\n        }\n    }\n}\n</script>"]},"metadata":{},"sourceType":"module"}